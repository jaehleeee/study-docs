# 2. 빠르게 살펴보는 카프라

## 데이터 문제 : 데이터 관리 솔루션의 요구사항
 * 중앙 저장소로 데이터를 신속하게 전송
 * 데이터 복제 기능으로 인한 failover
 * 많은 수의 데이터 컨슈머로 확장 가능

==> 카프카


## 카프카 아키텍쳐

### 1. 카프카는 메시지 브로커다.
 * 브로커는 상호 간 유익한 교환이나 거래를 위하 각자 반드시 알 필요가 없는 두 부분을 묶는 중개자다.
 * 카프카는 프로듀서나 컨슈머에 관한 어떤 상태도 유지 하지 않고, 메시지 교환소로만 작동한다.

### 2. 카프카는 로그다.
 * 카프카의 기본 메커니즘은 로그다.
   * 여기서 로그란? `추가만 가능한 시간순으로 완전히 정렬된 레코드 시퀀스`
 * 로그는 들어오는 레코드가 추가되는 파일이며, 각 레코드와 연관된 타임스탬프가 없더라도 시간에 따라 암묵적으로 정렬된다.
 * 카프카의 토픽은 토픽 이름으로 분리된 로그다. 
 * 토픽은 라벨이 붙은 로그라고 할 수 있다.
 * 로그가 머신 클러스터 간에 복제된 후 하나의 머신이 중지되면, 로그 파일을 재생하는 것으로 빠르게 복구할 수 있다.

### 3. 로그 동작 방식
 * 카프카 설치시 설정 중 하나는 `log.dir` 이며, 로그 데이터를 저장하는 위치다.
 * 각 토픽은 지정된 로그 디렉토리 아래의 하위 디렉토리에 매핑된다.

#### 예시 : topicA는 1개의 파티션, topicB는 3개의 파티션을 갖고 있을 때
```
/logs
  /logs/topicA_partition1
  /logs/topicB_partition1
  /logs/topicB_partition2
  /logs/topicB_partition3
```

### 4. 카프카와 파티션
 * 
