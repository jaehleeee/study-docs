# 빈 생명주기 콜백
 * 스프링 빈은 객체 생성 후 의존관계 주입을 시작한다. 그리고 의존관계 주입이 끝난 다음에야 필요한 데이터 사용준비가 완료된다.
   * 데이터 사용준비 완료 시점을 알 수 있게 하기 위해, 스프링은 해당 시점에 대한 콜백 메서드 기능들을 제공한다.
 * 스프링 빈의 이벤트 라이프 사이클
   * 스프링 컨테이너 생성 -> 빈 생성 -> 의존관계 주입 -> 초기화 콜백 -> (애플리케이션 사용) -> 사멸전 콜백 -> 스프링 종료 

## 1. 콜백
 * DB나 소켓처럼 애플리케이션 시작 시점에 미리 연결해두고, 종료 시점에 함께 종료하는 작업을 진행하려면, 객체의 초기화와 종료 작업 시점이 필요하다.
 * 초기화 콜백 : 빈 생성 후 의존관계 주입이 완료된 후 호출
 * 소멸전 콜백 : 빈이 소멸되기 직전에 호출

#### 참조 : 왜 객체 생성시점에 초기화 작업까지 하지 않는가?
객체의 생성과 초기화는 분리되는게 좋다. 각자 역할이 다르기 때문에 역할을 분리해놓아야 유지보수 관점에서 좋다.
물론 초기화 작업이 내부 값들을 조금 변경하거나 아주 단순한 경우에는 생성 시점에 한번에 다 처리하는게 나은 경우도 있다.


## 2. 인터페이스 `InitializingBean`, `DisposableBean`
 * 생성하려는 Bean 클래스에서 `InitializingBean`, `DisposableBean` 인터페이스를 상속하면, 초기화와 소멸전 콜백 메서드를 override하여 사용할 수 있다.
    * InitializingBean -> afterPropertiesSet();
    * DisposableBean -> destroy();
 * 단점
    * 스프링 전용 인터페이스들이기 때문에 스프링 전용 인터페이스에 의존한다.
    * 초기화, 소멸 메서드 이름을 변경할 수 없다.
    * 내가 코드를 고칠 수 없는 외부 라이브러리에 적용할 수 없다.
 * 이 방식은 스프링 초창기 나온 방법이고, 최근엔 어노테이션 방식을 더 많이 사용함.


## 3. 빈 등록 초기화, 소멸 메서드 지정
 * 생성하려는 Bean 클래스에서 초기화, 소멸 메서드를 만들어두고, @Bean 어노테이션에서 초기화, 소멸 메서드를 직접 설정할 수 있다.
```
@Bean(initMethod ="initMyCustomMethod", destroyMethod = "closeMyCustomMethod")
```
 * destroyMethod 설정의 디폴트는 `(infferred)` 유추다. 이는 `close`,`shutdown` 으로된 메서드명의 메서드가 있다면 자동으로 소멸 메서드로 등록해준다. 
    * 추론 기능을 사용하지 않으려면 destroyMethod ="" 빈공백으로 지정하면 된다.


## 4. (추천) 애노테이션 @PostConstruct, @PreDestroy
 * 생성하려는 Bean 클래스에서 초기화, 소멸 메서드를 만들어두고, 생성자 메서드에는 @PostConstruct, 소멸 메서드에는 @PreDestroy 애노테이션을 붙이면 된다.
 * 스프링이 아닌, java 표준 진영의 라이브러리. 즉 스프링 이외의 프레임워크에서 사용가능하다.
 * 컴포넌트 스캔과 잘 어울린다.
 * 유일한 단점은 외부 라이브러리에 적용하지 못하는 점이다. 외부 라이브러리를 초기화해야한다면 @Bean 애노테이션 기능을 사용하자.
