# 11장 결제 시스템
결제시스템이란? 금전적 가치의 이전을 통해 금융 거래를 정산하는 데 사용되는 모든 시스템

# 1단계: 문제 이해 및 설계 범위 확정
## 기능 요구사항
 * 대금 수신 : 판매자를 대신하여 고객으로부터 대금을 수령
 * 대금 정산 : 전세계의 판매자에게 제품 판매 대금을 송금

## 비기능 요구사항
 * 신뢰성 및 내결함성
    * 결제 실패 신중하게
 * 내부 서비스와 외부 서비스 간의 조정 프로세스 : 시스템 간의 결제 정보가 일치하는지 비동기적으로 확인   

## 개략적 규모 추정
 * 하루에 100만 트랜잭션 -> 초당 10건의 트랜잭션
 * 대역폭 대신 정확한 처리에 초점을 맞추저.

# 2단계: 개략적 설계안 제시 및 동의 구하기
 * 아마존을 예로 들면, 구매자가 주문하면 아마존 은행 계좌로 돈이 들어오는데, 이 돈 소유권은 아마존에 전부 있지 않다.
 * 아마존은 수수료만 받고 자금 관리자 역할만 수행
 * 제품 배송이 완료되면 판매 대금에서 수수료를 제외한 금액을 판매자의 계좌로 지급. 

## 대금 수신 흐름
![image](https://github.com/user-attachments/assets/f7ae0cee-0382-41eb-8996-d23e0b86d296)

### 구성요소
 * 결제 서비스
    * 사용자로부터 결제 이벤트를 수락하고 결제 프로세스 조율
    * 여러 결제 위험을 점검하고 통과한 결제만 처리한다.
    * 이러한 서비스는 매우 복잡하므로 전문화되어 있는 제3자 제공업체를 이용한다.
 * 원장
   * 결제 트랜잭션에 대한 금융 기록
   * 전자상거래 총 수익을 계산하거나 향후 수익 에측, 결제 후 분석 에서 매우 중요한 역할
 * 지갑
   * 판매자의 계정 잔액을 기록
   * 특정 사용자가 결제한 총 금액을 기록     


# 3단계: 상세 설계


## 4단계: 마무리
