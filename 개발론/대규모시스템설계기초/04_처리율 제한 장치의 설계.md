# 처리율 제한 장치의 설계
 * 네트워크 시스템에서 처리율 제한 장치(rate limiter)는 클라이언트 또는 서비스가 보내는 트래픽의 처리율을 제어하기 위한 장ㅇ치다.
 * 예시
   * 사용자는 초당 2회 이상 새 글을 올릴 수 없다.
   * 같은 IP 주소로는 하루 10개 이상 계정을 생성할 수 없다.

### 처리율 제한 장치를 두면 좋은 점
 * DoS 공경에 의 한 자원 고갈 방지
 * 비용 절감
   * 서버를 많이 두지 않아도 된다.
   * third-party API 사용료를 지불하면 특히 더
 * 서버 과부하 막는다.

### 처리율 제한 장치 구현하는 4단계
 1. 문제 이해 및 설계 범위 확정
 2. 개략적 설계안 제시 및 동의 구하기
 3. 상세 설계
 4. 마무리

## 1. 문제 이해 및 설계 범위 확정
 * 면접관과 소통하면서 어떤 제한 장치를 구현해야 하는지 구체화하기
#### 요구사항
 * 낮은 응답시간 유지
 * 가능한 적은 메모리 사용
 * 분산형 처리율 제한 (하나의 장치로 여러 서버나 프로세스 공유)
 * 예외 처리 : 요청이 제한되었을때 사용자에게 이를 분명히 안내해야 한다.
 * fault tolerance : 이 장치가 전체 시스템에 영향 주면 안된다.

## 2. 개략적 설계안 제시 및 동의 구하기
### 장치를 어디에 둘 것인가?
 * 클라이언트 측 : 비추.. 쉽게 위변조 가능하며 모든 클라이언트의 구현 통제의 여러움
 * 서버 측 : 서버에 두거나, 서버 앞단에 미들웨어를 둔다.
   * 미들웨어에서 요청이 막히면 429(Too many requests) 응답을 준다.
   * 보통 미들웨어는 API 게이트웨이 라는 컴포넌트에 의해 구현된다.
#### API 게이트웨이
 * 처리율 제한
 * SSL 종단
 * 사용자 인증
 * IP 허용 목록 관리 등

(livecloud 에서도 pasta APIGW 사용중, 왜 쓰는지는 잘 모르겠음.)

#### 처리율 장치를 결정할때 판단 요소
 * 기술 스택
 * 처리율 제한 알고리즘 - third-party 사용하기로 했다면 선택지 제한될 수 있음
 * 이미 다른 이유로 API gateway 쓰기로 했다면, 처리율 제한 기능도 포함시켜야 할 수 있다.
 * 인력 비용

### 처리율 제한 알고리즘
### 토큰 버킷 알고리즘
### 누출 버킷 알고리즘
### 고정 윈도 카운터 알고리즘
### 이동 윈도 로그 알고리즘
### 이동 윈도 카운터 알고리즘

 
